# minechat_connector
Пара консольных программ - одна читает и сохраняет сообщения из чата, другая - отправляет.

##  Установка
Установите [Python](https://www.python.org/) если он у Вас еще не установлен.

Склонируйте репозиторий к себе на компьютер:
```shell
$ git clone https://github.com/elnarmen/minechat_connector.git
```

Перейдите в каталог проекта:
```shell
$ cd minechat_connector
```

В проекте используется Poetry для управления зависимостями. Установите его комнадой:
```shell
$ pip install poetry
```

Установите зависимости:
```shell
$ poetry install
```
После выполнения команды `poetry install`, Poetry создаст свою собственную виртуальную среду и установит все зависимости, указанные в pyproject.toml и poetry.lock.
Активируйте виртуальную среду с помощью:
```shell
$ poetry shell
```

## reader.py
Скрипт запускает просмотр чата и сохранение истории в файл.

Команда запуска:
```
python reader.py
```
По умолчанию скрипт будет подключаться к серверу чата `minechat.dvmn.org` на порту 5000, а история чата будет записана в файл `chat_history.txt`
в корневой папке проекта.<br>
Для того, чтобы изменить хост, порт или путь к файлу с историей чата, используйте аргументы командной строки `--host`, `--port`, `--path`:
```shell
$ python reader.py -- host <your-host> --port <port-number> --path /path/to/file.txt
# <your-host> - адрес вашего хоста
# <port-numer> - номер порта
# /path/to/file.txt - путь к файлу для хранения история чата
```

## writer.py
Скрипт позволяет отправить сообщение в чат.<br>
Если вы пишете в чат впервые, вам будет присвоено имя пользователя `anonymous`. Вы можете указать другое имя пользователя в аргументе командной строки `--username`.


Отправить сообщение от имени нового пользователя: 
```
python writer.py 'message example' --username 'John Doe'
```
Токен, полученный при регистрации, будет записан в файл `.env` в переменную `USER_TOKEN`. Чтобы зарегистрировать нового пользователя, 
удалите переменную `USER TOKEN` прежде, чем запускать команду отправки сообщения.

Отправить сообщение от имени зарегистрированного пользователя:
```
python writer.py 'message example'
# (токен будет взят из переменной `USER_TOKEN` файла .env. Если переменной в файле нет, будет создан новый пользователь с именем `anonymous`
```

По умолчанию скрипт будет отправлять сообщения к серверу чата `minechat.dvmn.org` на порту 5050.
Для того, чтобы изменить хост или порт, используйте аргументы командной строки `--host`, `--port`:
```shell
$ python writer.py -- host <your-host> --port <port-number>
# <your-host> - адрес вашего хоста
# <port-numer> - номер порта
